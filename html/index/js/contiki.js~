/* Show and Hide of Border and Node Configuration*/
$(function(){
	$('#node').on('click', function(){
		$('#border_platform').hide();
		$('#node_platform').show();
	});
	$('#border_router').on('click', function(){
		$('#node_platform').hide();
		$('#border_platform').show();
	});
});

function myFunction(){
	loadConfiguration();
}

//This function triggers the make of the software and calls the shellOutput.
function domake(){
	var messageText = document.getElementById('myText').value;
	loading();
	$.ajax({
		"url": "/contiki/domake",
		data: {"cmd": messageText,
			"workingDr": "/home/contiki/contiki-2.7/examples/hello-world"},
		context: this,
		dataType: "json",
		success: function(response){
			shellOutput(response);
		}	
	});
}

/* Platform Manipulators*/
//load configs for nodes
function loadConfigurations(){
	loadNodeConfiguration();
	loadBorderConfigration();
}

function loadNodeConfiguration(){
	$.ajax({
		"url": "/contiki/getnodeconfiguration",
		context: this,
		dataType: "json",
		success: function(response){
			constructNodeConfiguration(response.nodes[0].projectName);
		}
	});
}

//construct the innerHTML
function constructNodeConfiguration(response){
		var output = '\
<h3> Configuration Panel for a sensor node</h3>\
<form>\
	<input type = "checkbox" id = "Something" value = "Something"> Something<br>\
	<input type = "text" id = "myText" value = "make TARGET=sky"><br>\
</form>\
<input class = "communicate" type = "button" value = "Make" onclick = "domake()">'.concat(response);
	document.getElementById("node_platform").innerHTML = output;
}

//load configs for border router
function loadBorderConfigration(){
	var output = "Some information about the border configration";
	document.getElementById("border_platform").innerHTML = output;
}

/* Shell Manuplators */
//Injects the response to the HTML file.
function shellOutput (response){
	
	document.getElementById("shell").innerHTML = response.output;
}

//Show loading in HTML file.
function loading(){
	var output = 'Loading';
	document.getElementById("shell").innerHTML = output;
	$('#shell').show();
}
